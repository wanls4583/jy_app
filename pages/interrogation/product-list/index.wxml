<view class="container">
	<view class="position-fixed top-0 width-100">
		<van-search
			bind:change="onChangeText"
			bind:search="onSearch"
			bindtap="onGotoSearch"
			disabled="{{true}}"
			placeholder="请输入产品"
			shape="round"
			value="{{searchText}}"
		/>
		<van-tabs active="{{active}}" bind:change="onChangeTab">
			<van-tab title="营养套餐"></van-tab>
			<van-tab title="营养产品"></van-tab>
		</van-tabs>
	</view>
	<view class="height-100" style="padding-top:108px">
		<swiper bindchange="onChangeSwiper" class="width-100 height-100" current="{{active}}">
			<swiper-item>
				<pull-scroll-view
					bindrefresh="onRefresh"
					bindscroll="onTaocanScroll"
					bindscrolltolower="onLoadMore"
					lower-threshold="300px"
					stop-refresh="{{taocanData.stopRefresh}}"
				>
					<view
						style="min-height:{{page<taocanData.totalPage ? wrapHeight : 0}}px"
						wx:for="{{pageArr}}"
						wx:for-item="page"
						wx:if="{{page<=taocanData.lastPage}}"
						wx:key="index"
					>
						<block wx:if="{{page>=taocanData.nowPage-1 && page<=taocanData.nowPage+1}}">
							<view
								bindtap="onclickProdcut"
								class="product flex--center--start padding-30 white-background-color border-bottom"
								data-id="{{product.id}}"
								wx:for="{{taocanData.pageList[page]}}"
								wx:for-item="product"
								wx:key="id"
							>
								<view class="width-150rpx height-150rpx" style="background:url({{product.goodsPic}}) no-repeat center;background-size:cover"></view>
								<view class="flex-direction-column flex-grow-1 flex--start--between height-150rpx padding-left-30">
									<view>{{product.goodsName}}</view>
									<view class="flex--center--between width-100">
										<text class="gray-color">一天{{product.frequency}}次</text>
									</view>
									<view class="flex--center--between width-100">
										<text class="danger-color">￥{{product.price}}/{{product._unit}}</text>
										<view catchtap="onAddTaocan" class="button primary small" data-item="{{product}}">添加该套餐</view>
									</view>
								</view>
							</view>
						</block>
					</view>
					<view class="padding-30 gray-color align-center font-small" wx:if="{{taocanData.totalPage>0&&taocanData.lastPage>=taocanData.totalPage}}">没有更多了</view>
					<view class="padding-30 gray-color align-center font-small" wx:elif="{{taocanData.totalPage==0}}">
						<van-empty description="未查询到相关商品，请重新搜索" />
					</view>
					<view class="padding-30 gray-color align-center font-small" wx:else>正在加载中...</view>
				</pull-scroll-view>
			</swiper-item>
			<swiper-item>
				<pull-scroll-view
					bindrefresh="onRefresh"
					bindscroll="onProductScroll"
					bindscrolltolower="onLoadMore"
					lower-threshold="300px"
					stop-refresh="{{productData.stopRefresh}}"
				>
					<view
						style="min-height:{{page<productData.totalPage ? wrapHeight : 0}}px"
						wx:for="{{pageArr}}"
						wx:for-item="page"
						wx:if="{{page<=productData.lastPage}}"
						wx:key="index"
					>
						<block wx:if="{{page>=productData.nowPage-1 && page<=productData.nowPage+1}}">
							<view
								bindtap="onclickProdcut"
								class="product flex--center--start padding-30 white-background-color border-bottom"
								data-id="{{product.id}}"
								wx:for="{{productData.pageList[page]}}"
								wx:for-item="product"
								wx:key="id"
							>
								<view class="width-150rpx height-150rpx" style="background:url({{product.goodsPic}}) no-repeat center;background-size:cover"></view>
								<view class="flex-direction-column flex-grow-1 flex--start--between height-150rpx padding-left-30">
									<view>{{product.goodsName}}</view>
									<view class="flex--center--between width-100">
										<text class="gray-color">{{product.standardNum}}{{product._standardUnit}}/{{product._unit}}</text>
									</view>
									<view class="flex--center--between width-100">
										<text class="danger-color">￥{{product.price}}/{{product._unit}}</text>
										<view catchtap="onAddProduct" class="button primary small" data-item="{{product}}">添加该产品</view>
									</view>
								</view>
							</view>
						</block>
					</view>
					<view class="padding-30 gray-color align-center font-small" wx:if="{{productData.totalPage>0&&productData.lastPage>=productData.totalPage}}">没有更多了</view>
					<view class="padding-30 gray-color align-center font-small" wx:elif="{{productData.totalPage==0}}">
						<van-empty description="未查询到相关商品，请重新搜索" />
					</view>
					<view class="padding-30 gray-color align-center font-small" wx:else>正在加载中...</view>
				</pull-scroll-view>
			</swiper-item>
		</swiper>
	</view>
</view>
