<navigation-bar auto-back="{{false}}" bind:back="onBack" title="用法用量"></navigation-bar>
<view class="padding-bottom-footer">
	<view class="flex--center--between padding-30 white-background-color">
		<view class="width-150rpx height-150rpx border" style="background:url({{goods.goodsPic}}) no-repeat center;background-size:cover"></view>
		<view class="height-150rpx flex-grow-1 flex--start--between flex-direction-column margin-left-20">
			<view>{{goods.goodsName}}</view>
			<view class="gray-color" wx:if="{{goods.type==1}}">{{goods.standardNum}}{{unitChange[goods.standardUnit]}}/{{unitChange[goods.useUnit]}}</view>
			<view class="danger-color">￥{{goods.price}}/{{goods._unit}}</view>
		</view>
	</view>
	<view class="margin-top-20 white-background-color">
		<van-field bind:input="onInputNum" data-prop="perUseNum" disabled="{{goods.type==2}}" label="每次用量" title-width="4.5em" type="number" value="{{perUseNum}}">
			<view slot="right-icon" wx:if="{{goods.type==1}}">{{unitChange[goods.standardUnit]}}</view>
			<view slot="right-icon" wx:else>份</view>
		</van-field>
		<van-field bind:input="onInputNum" data-prop="modulateDose" label="配制用量" title-width="4.5em" type="number" value="{{modulateDose}}" wx:if="{{goods.type==2}}">
			<view slot="right-icon">毫升</view>
		</van-field>
		<van-field bindtap="onShowFrequency" label="频率" readonly title-width="4.5em" value="{{_frequency}}" wx:if="{{goods.type==1}}"></van-field>
		<van-field disabled label="频率" title-width="4.5em" value="{{_frequency}}" wx:else></van-field>
		<van-cell>
			<view class="flex--center--between">
				<text>天数</text>
				<van-stepper bind:change="onInputNum" data-prop="days" input-width="300rpx" value="{{days}}" />
				<text>天</text>
			</view>
		</van-cell>
		<van-field bindtap="onShowGiveWay" label="给予方式" readonly title-width="4.5em" value="{{_giveWay}}"></van-field>
		<van-field bind:input="onInput" data-prop="remark" label="备注" title-width="4.5em" value="{{remark}}"></van-field>
		<view class="flex--center--between padding-30">
			<view>总量：{{gross}}{{goods._unit}}</view>
			<view class="primary-color">金额：￥{{totalAmount}}</view>
		</view>
	</view>
	<view class="position-fixed bottom-0 width-100 padding-30">
		<view bindtap="onSave" class="button primary block">保存</view>
	</view>
	<van-popup position="bottom" show="{{frequencyVisible}}">
		<van-picker bind:cancel="onCancel" bind:confirm="onConfirmFrequency" columns="{{frequencyArray}}" default-index="{{frequencyDefault}}" show-toolbar></van-picker>
	</van-popup>
	<van-popup position="bottom" show="{{giveWayVisible}}">
		<van-picker
			bind:cancel="onCancel"
			bind:confirm="onConfirmGiveWay"
			columns="{{giveWayList}}"
			default-index="{{giveWayDefault}}"
			show-toolbar
			value-key="label"
		></van-picker>
	</van-popup>
</view>
<van-dialog id="van-dialog" />
