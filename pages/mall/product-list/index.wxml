<import src="/template/goods-item.wxml" />
<view class="container">
	<view class="position-fixed top-0 width-100">
		<van-search
			bind:change="onChangeText"
			bind:search="onSearch"
			bindtap="onGotoSearch"
			disabled="{{true}}"
			placeholder="请输入产品"
			shape="round"
			value="{{searchText}}"
		/>
		<van-tabs active="{{active}}" bind:change="onChangeTab">
			<van-tab title="营养套餐"></van-tab>
			<van-tab title="营养产品"></van-tab>
		</van-tabs>
	</view>
	<view class="height-100" style="padding-top:98px">
		<swiper bindchange="onChangeSwiper" class="width-100 height-100 border-top" current="{{active}}">
			<swiper-item>
				<pull-scroll-view
					bindrefresh="onRefresh"
					bindscroll="onTaocanScroll"
					bindscrolltolower="onLoadMore"
					lower-threshold="300px"
					stop-refresh="{{taocanData.stopRefresh}}"
				>
					<view
						class="padding-left-right-30 white-background-color"
						style="min-height:{{page<taocanData.totalPage ? wrapHeight : 0}}px"
						wx:for="{{pageArr}}"
						wx:for-item="page"
						wx:if="{{page<=taocanData.lastPage}}"
						wx:key="index"
					>
						<view wx:if="{{page>=taocanData.nowPage-1 && page<=taocanData.nowPage+1}}">
							<template data="{{taocan:item}}" is="taocan-item" wx:for="{{taocanData.pageList[page]}}" wx:key="id"></template>
						</view>
					</view>
					<view class="padding-30 gray-color align-center font-small" wx:if="{{taocanData.totalPage>0&&taocanData.lastPage>=taocanData.totalPage}}">没有更多了</view>
					<view class="padding-30 gray-color align-center font-small" wx:elif="{{taocanData.totalPage==0}}">
						<van-empty description="未查询到相关商品，请重新搜索" />
					</view>
					<view class="padding-30 gray-color align-center font-small" wx:else>正在加载中...</view>
				</pull-scroll-view>
			</swiper-item>
			<swiper-item>
				<pull-scroll-view
					bindrefresh="onRefresh"
					bindscroll="onProductScroll"
					bindscrolltolower="onLoadMore"
					lower-threshold="300px"
					stop-refresh="{{productData.stopRefresh}}"
				>
					<view
						class="padding-left-right-30 white-background-color"
						style="min-height:{{page<productData.totalPage ? wrapHeight : 0}}px"
						wx:for="{{pageArr}}"
						wx:for-item="page"
						wx:if="{{page<=productData.lastPage}}"
						wx:key="index"
					>
						<view wx:if="{{page>=productData.nowPage-1 && page<=productData.nowPage+1}}">
							<template data="{{product:item}}" is="product-item" wx:for="{{productData.pageList[page]}}" wx:key="id"></template>
						</view>
					</view>
					<view class="padding-30 gray-color align-center font-small" wx:if="{{productData.totalPage>0&&productData.lastPage>=productData.totalPage}}">没有更多了</view>
					<view class="padding-30 gray-color align-center font-small" wx:elif="{{productData.totalPage==0}}">
						<van-empty description="未查询到相关商品，请重新搜索" />
					</view>
					<view class="padding-30 gray-color align-center font-small" wx:else>正在加载中...</view>
				</pull-scroll-view>
			</swiper-item>
		</swiper>
	</view>
</view>
