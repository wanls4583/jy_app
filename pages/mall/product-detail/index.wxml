<!--index.wxml-->
<view class="container" style="padding-bottom:50px">
	<view bindtap="onBack" class="position-fixed z-index-100" style="top:{{bTop}}px;left:0;padding-left:20px;">
		<view class="flex--center--center radius-50 clickable" style="width:{{bHeight}}px;height:{{bHeight}}px;background:rgba(0,0,0,0.5)">
			<van-icon color="#fff" name="arrow-left" size="20px" />
		</view>
	</view>
	<swiper autoplay="{{true}}" bindchange="onBannerChang" circular="{{true}}" class="width-100 height-100vw" duration="{{500}}" interval="{{5000}}">
		<swiper-item bindtap="onClickTopImg" data-src="{{item}}" wx:for="{{banner}}" wx:for-item="item" wx:key="item">
			<view class="position-relative height-100" style="background:url({{item}}) no-repeat center;background-size:cover">
				<view class="banner-bottom position-absolute left-0 bottom-0 width-100 white-color align-right">
					<text>{{currentBannerIndex+1}}/{{banner.length}}</text>
				</view>
			</view>
		</swiper-item>
	</swiper>
	<view class="padding-30 white-background-color">
		<view class="font-title font-bold color-333">{{productInfo.goodsName}}</view>
		<view class="flex--center--between margin-top-20">
			<view class="font-large font-bold danger-color">￥{{productInfo.price}}</view>
			<view bindtap="onAddToCart" class="flex--center--center button primary small" style="border-radius:100px">
				<van-icon name="plus" style="transform:translateY(2rpx)"/>
				<text>购买</text>
			</view>
		</view>
	</view>
	<view class="margin-top-20 padding-30 white-background-color">
		<view class="font-title font-bold">商品信息</view>
		<view class="margin-top-20 margin-bottom-20 color-666">{{productInfo.description}}</view>
		<image bindtap="onClickDesImg" class="flex width-100" data-src="{{item}}" mode="widthFix" src="{{item}}" wx:for="{{desImgList}}" wx:key="item" />
	</view>
	<view class="footer flex--center--between padding-left-30 border-top">
		<view bindtap="onShowCart" class="flex--center--start">
			<van-icon class="{{cart.length>0?'primary-color':'gray-color'}} margin-right-30" info="{{cartNum}}" name="shopping-cart-o" size="20px" />
			<text class="gray-color" style="margin-left:10px" wx:if="{{!cart.length}}">{{deliveryMoney?'运费：￥'+deliveryMoney:'免费配送'}}</text>
			<text class="primary-color" wx:else>￥{{cartTotalMoney}}</text>
		</view>
		<view bindtap="onPay" class="button primary center height-100 radius-0 {{!cart.length ? 'disabled' : ''}}">
			<text wx:if="{{cart.length}}">去结算</text>
			<text wx:elif="{{minOrderMoney}}">￥{{minOrderMoney}}起送</text>
			<text wx:else>去结算</text>
		</view>
	</view>
	<van-popup bind:click-overlay="onShowCart" custom-style="bottom:50px" position="bottom" show="{{cartVisible}}" z-index="0">
		<view class="align-right">
			<view bindtap="onClearCart" class="inline-block gray-color padding-left-right-30 padding-top-bottom-20">清空购物车</view>
		</view>
		<view class="flex--center--between border-bottom padding-30" wx:for="{{cart}}" wx:key="index">
			<view>{{item.product.goodsName}}</view>
			<view class="primary-color">￥{{item.product.price}}</view>
			<view class="flex--center--center position-relative">
				<van-stepper bind:minus="onReduceNum" bind:plus="onAddNum" data-id="{{item.product.id}}" integer min="{{0}}" value="{{item.num}}" />
			</view>
		</view>
	</van-popup>
</view>
